import { NumberCriteria } from '../../../../module/data/criteria/number-criteria.ts'

describe('Number Criteria', () => {
  describe('Comparitor: Any Number', () => {
    const anyC = new NumberCriteria({ compare: NumberCriteria.Comparison.Any })

    it('any number matches', () => {
      expect(anyC.matches(1)).toBe(true)
      expect(anyC.matches(-100)).toBe(true)
      expect(anyC.matches(NaN)).toBe(true)
      expect(anyC.matches(Infinity)).toBe(true)
      expect(anyC.matches(-Infinity)).toBe(true)
      expect(anyC.matches(0)).toBe(true)
    })
  })

  describe('Comparitor: Equals', () => {
    const criteria = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: 10 })
    const nanC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: NaN })
    const infC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: Infinity })
    const negInfC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: -Infinity })
    const zeroC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: 0 })
    const negZeroC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: -0 })
    const floatC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: 10.5 })
    const negFloatC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: -10.5 })
    const largeC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: 1e19 })
    const smallC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: 1e-19 })
    const negativeLargeC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: -1e19 })
    const negativeSmallC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: -1e-19 })
    const nullC = new NumberCriteria({ compare: NumberCriteria.Comparison.Equals, qualifier: null })

    it('matches exact number', () => {
      expect(criteria.matches(10)).toBe(true)
      expect(floatC.matches(10.5)).toBe(true)
      expect(negFloatC.matches(-10.5)).toBe(true)
      expect(largeC.matches(1e19)).toBe(true)
      expect(smallC.matches(1e-19)).toBe(true)
      expect(negativeLargeC.matches(-1e19)).toBe(true)
      expect(negativeSmallC.matches(-1e-19)).toBe(true)
      expect(zeroC.matches(0)).toBe(true)
      expect(negZeroC.matches(-0)).toBe(true)
      expect(infC.matches(Infinity)).toBe(true)
      expect(negInfC.matches(-Infinity)).toBe(true)
    })

    it('does not match different number', () => {
      expect(criteria.matches(5)).toBe(false)
      expect(floatC.matches(10.4)).toBe(false)
      expect(negFloatC.matches(-10.4)).toBe(false)
      expect(largeC.matches(1e18)).toBe(false)
      expect(smallC.matches(1e-18)).toBe(false)
      expect(negativeLargeC.matches(-1e18)).toBe(false)
      expect(negativeSmallC.matches(-1e-18)).toBe(false)
      expect(zeroC.matches(1)).toBe(false)
      expect(negZeroC.matches(1)).toBe(false)
      expect(nanC.matches(0)).toBe(false)
      expect(infC.matches(1e308)).toBe(false)
      expect(negInfC.matches(-1e308)).toBe(false)
      expect(nullC.matches(0)).toBe(false)
    })

    it('does not match null for any qualifier', () => {
      expect(criteria.matches(null)).toBe(false)
      expect(floatC.matches(null)).toBe(false)
      expect(negFloatC.matches(null)).toBe(false)
      expect(largeC.matches(null)).toBe(false)
      expect(smallC.matches(null)).toBe(false)
      expect(negativeLargeC.matches(null)).toBe(false)
      expect(negativeSmallC.matches(null)).toBe(false)
      expect(zeroC.matches(null)).toBe(false)
      expect(negZeroC.matches(null)).toBe(false)
      expect(nanC.matches(null)).toBe(false)
      expect(infC.matches(null)).toBe(false)
      expect(negInfC.matches(null)).toBe(false)
      expect(nullC.matches(null)).toBe(false)
    })
  })

  describe('Comparitor: Is Not Equal', () => {
    const criteria = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: 10 })
    const nanC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: NaN })
    const infC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: Infinity })
    const negInfC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: -Infinity })
    const zeroC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: 0 })
    const negZeroC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: -0 })
    const floatC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: 10.5 })
    const negFloatC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: -10.5 })
    const largeC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: 1e19 })
    const smallC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: 1e-19 })
    const negativeLargeC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: -1e19 })
    const negativeSmallC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: -1e-19 })
    const nullC = new NumberCriteria({ compare: NumberCriteria.Comparison.NotEquals, qualifier: null })

    it('does not match exact number', () => {
      expect(criteria.matches(10)).toBe(false)
      expect(floatC.matches(10.5)).toBe(false)
      expect(negFloatC.matches(-10.5)).toBe(false)
      expect(largeC.matches(1e19)).toBe(false)
      expect(smallC.matches(1e-19)).toBe(false)
      expect(negativeLargeC.matches(-1e19)).toBe(false)
      expect(negativeSmallC.matches(-1e-19)).toBe(false)
      expect(zeroC.matches(0)).toBe(false)
      expect(negZeroC.matches(-0)).toBe(false)
      expect(infC.matches(Infinity)).toBe(false)
      expect(negInfC.matches(-Infinity)).toBe(false)
    })

    it('matches different number', () => {
      expect(criteria.matches(5)).toBe(true)
      expect(floatC.matches(10.4)).toBe(true)
      expect(negFloatC.matches(-10.4)).toBe(true)
      expect(largeC.matches(1e18)).toBe(true)
      expect(smallC.matches(1e-18)).toBe(true)
      expect(negativeLargeC.matches(-1e18)).toBe(true)
      expect(negativeSmallC.matches(-1e-18)).toBe(true)
      expect(zeroC.matches(1)).toBe(true)
      expect(negZeroC.matches(1)).toBe(true)
      expect(nanC.matches(0)).toBe(true)
      expect(infC.matches(1e308)).toBe(true)
      expect(negInfC.matches(-1e308)).toBe(true)
      expect(nullC.matches(0)).toBe(true)
    })

    it('matches NaN for any qualifier', () => {
      expect(nanC.matches(NaN)).toBe(true)
      expect(criteria.matches(NaN)).toBe(true)
      expect(floatC.matches(NaN)).toBe(true)
      expect(negFloatC.matches(NaN)).toBe(true)
      expect(largeC.matches(NaN)).toBe(true)
      expect(smallC.matches(NaN)).toBe(true)
      expect(negativeLargeC.matches(NaN)).toBe(true)
      expect(negativeSmallC.matches(NaN)).toBe(true)
      expect(zeroC.matches(NaN)).toBe(true)
      expect(negZeroC.matches(NaN)).toBe(true)
      expect(infC.matches(NaN)).toBe(true)
      expect(negInfC.matches(NaN)).toBe(true)
      expect(nullC.matches(NaN)).toBe(true)
    })

    it('matches null when qualifier is a number', () => {
      expect(criteria.matches(null)).toBe(true)
      expect(floatC.matches(null)).toBe(true)
      expect(negFloatC.matches(null)).toBe(true)
      expect(largeC.matches(null)).toBe(true)
      expect(smallC.matches(null)).toBe(true)
      expect(negativeLargeC.matches(null)).toBe(true)
      expect(negativeSmallC.matches(null)).toBe(true)
      expect(zeroC.matches(null)).toBe(true)
      expect(negZeroC.matches(null)).toBe(true)
      expect(nanC.matches(null)).toBe(true)
      expect(infC.matches(null)).toBe(true)
      expect(negInfC.matches(null)).toBe(true)
    })

    it('matches null when qualifier is null', () => {
      expect(nullC.matches(null)).toBe(true)
    })
  })

  describe('Comparitor: At Least', () => {
    const criteria = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: 10 })
    const nanC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: NaN })
    const infC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: Infinity })
    const negInfC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: -Infinity })
    const zeroC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: 0 })
    const negZeroC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: -0 })
    const floatC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: 10.5 })
    const negFloatC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: -10.5 })
    const largeC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: 1e19 })
    const smallC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: 1e-19 })
    const negativeLargeC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: -1e19 })
    const negativeSmallC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: -1e-19 })
    const nullC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtLeast, qualifier: null })

    it('matches numbers greater than or equal to qualifier', () => {
      expect(criteria.matches(10)).toBe(true)
      expect(criteria.matches(15)).toBe(true)
      expect(floatC.matches(10.5)).toBe(true)
      expect(floatC.matches(20)).toBe(true)
      expect(negFloatC.matches(-10.5)).toBe(true)
      expect(negFloatC.matches(0)).toBe(true)
      expect(largeC.matches(1e19)).toBe(true)
      expect(largeC.matches(1e20)).toBe(true)
      expect(smallC.matches(1e-19)).toBe(true)
      expect(smallC.matches(1e-18)).toBe(true)
      expect(negativeLargeC.matches(-1e19)).toBe(true)
      expect(negativeLargeC.matches(0)).toBe(true)
      expect(negativeSmallC.matches(-1e-19)).toBe(true)
      expect(negativeSmallC.matches(0)).toBe(true)
      expect(zeroC.matches(0)).toBe(true)
      expect(zeroC.matches(5)).toBe(true)
      expect(negZeroC.matches(-0)).toBe(true)
      expect(negZeroC.matches(5)).toBe(true)
      expect(infC.matches(Infinity)).toBe(true)
    })

    it('does not match numbers less than qualifier', () => {
      expect(criteria.matches(5)).toBe(false)
      expect(floatC.matches(10.4)).toBe(false)
      expect(negFloatC.matches(-11)).toBe(false)
      expect(largeC.matches(1e18)).toBe(false)
      expect(smallC.matches(1e-20)).toBe(false)
      expect(negativeLargeC.matches(-1e20)).toBe(false)
      expect(negativeSmallC.matches(-1e-18)).toBe(false)
      expect(zeroC.matches(-1)).toBe(false)
      expect(negZeroC.matches(-1)).toBe(false)
      expect(nanC.matches(NaN)).toBe(false)
      expect(nullC.matches(0)).toBe(false)
    })

    it('matches Infinity for any qualifier except -Infinity', () => {
      expect(infC.matches(Infinity)).toBe(true)
      expect(negInfC.matches(Infinity)).toBe(true)
      expect(nanC.matches(Infinity)).toBe(false)
      expect(criteria.matches(Infinity)).toBe(true)
      expect(floatC.matches(Infinity)).toBe(true)
      expect(negFloatC.matches(Infinity)).toBe(true)
      expect(largeC.matches(Infinity)).toBe(true)
      expect(smallC.matches(Infinity)).toBe(true)
      expect(negativeLargeC.matches(Infinity)).toBe(true)
      expect(negativeSmallC.matches(Infinity)).toBe(true)
      expect(zeroC.matches(Infinity)).toBe(true)
      expect(negZeroC.matches(Infinity)).toBe(true)
    })

    it('does not match -Infinity for any qualifier except -Infinity', () => {
      expect(negInfC.matches(-Infinity)).toBe(true)
      expect(infC.matches(-Infinity)).toBe(false)
      expect(nanC.matches(-Infinity)).toBe(false)
      expect(criteria.matches(-Infinity)).toBe(false)
      expect(floatC.matches(-Infinity)).toBe(false)
      expect(negFloatC.matches(-Infinity)).toBe(false)
      expect(largeC.matches(-Infinity)).toBe(false)
      expect(smallC.matches(-Infinity)).toBe(false)
      expect(negativeLargeC.matches(-Infinity)).toBe(false)
      expect(negativeSmallC.matches(-Infinity)).toBe(false)
      expect(zeroC.matches(-Infinity)).toBe(false)
      expect(negZeroC.matches(-Infinity)).toBe(false)
    })

    it('does not match NaN for any qualifier', () => {
      expect(nanC.matches(NaN)).toBe(false)
      expect(criteria.matches(NaN)).toBe(false)
      expect(floatC.matches(NaN)).toBe(false)
      expect(negFloatC.matches(NaN)).toBe(false)
      expect(largeC.matches(NaN)).toBe(false)
      expect(smallC.matches(NaN)).toBe(false)
      expect(negativeLargeC.matches(NaN)).toBe(false)
      expect(negativeSmallC.matches(NaN)).toBe(false)
      expect(zeroC.matches(NaN)).toBe(false)
      expect(negZeroC.matches(NaN)).toBe(false)
      expect(infC.matches(NaN)).toBe(false)
      expect(negInfC.matches(NaN)).toBe(false)
      expect(nullC.matches(NaN)).toBe(false)
    })

    it('does not match null for any qualifier', () => {
      expect(nullC.matches(null)).toBe(false)
      expect(criteria.matches(null)).toBe(false)
      expect(floatC.matches(null)).toBe(false)
      expect(negFloatC.matches(null)).toBe(false)
      expect(largeC.matches(null)).toBe(false)
      expect(smallC.matches(null)).toBe(false)
      expect(negativeLargeC.matches(null)).toBe(false)
      expect(negativeSmallC.matches(null)).toBe(false)
      expect(zeroC.matches(null)).toBe(false)
      expect(negZeroC.matches(null)).toBe(false)
      expect(infC.matches(null)).toBe(false)
      expect(negInfC.matches(null)).toBe(false)
      expect(nanC.matches(null)).toBe(false)
    })
  })

  describe('Comparitor: At Most', () => {
    const criteria = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: 10 })
    const nanC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: NaN })
    const infC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: Infinity })
    const negInfC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: -Infinity })
    const zeroC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: 0 })
    const negZeroC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: -0 })
    const floatC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: 10.5 })
    const negFloatC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: -10.5 })
    const largeC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: 1e19 })
    const smallC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: 1e-19 })
    const negativeLargeC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: -1e19 })
    const negativeSmallC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: -1e-19 })
    const nullC = new NumberCriteria({ compare: NumberCriteria.Comparison.AtMost, qualifier: null })

    it('matches numbers less than or equal to qualifier', () => {
      expect(criteria.matches(10)).toBe(true)
      expect(criteria.matches(5)).toBe(true)
      expect(floatC.matches(10.5)).toBe(true)
      expect(floatC.matches(0)).toBe(true)
      expect(negFloatC.matches(-10.5)).toBe(true)
      expect(negFloatC.matches(-20)).toBe(true)
      expect(largeC.matches(1e19)).toBe(true)
      expect(largeC.matches(1e18)).toBe(true)
      expect(smallC.matches(1e-19)).toBe(true)
      expect(smallC.matches(1e-20)).toBe(true)
      expect(negativeLargeC.matches(-1e19)).toBe(true)
      expect(negativeLargeC.matches(-1e20)).toBe(true)
      expect(negativeSmallC.matches(-1e-19)).toBe(true)
      expect(negativeSmallC.matches(-1e-18)).toBe(true)
      expect(zeroC.matches(0)).toBe(true)
      expect(zeroC.matches(-5)).toBe(true)
      expect(negZeroC.matches(-0)).toBe(true)
      expect(negZeroC.matches(-5)).toBe(true)
      expect(negInfC.matches(-Infinity)).toBe(true)
    })

    it('does not match numbers greater than qualifier', () => {
      expect(criteria.matches(15)).toBe(false)
      expect(floatC.matches(10.6)).toBe(false)
      expect(negFloatC.matches(-10)).toBe(false)
      expect(largeC.matches(1e20)).toBe(false)
      expect(smallC.matches(1e-18)).toBe(false)
      expect(negativeLargeC.matches(-1e18)).toBe(false)
      expect(negativeSmallC.matches(-1e-20)).toBe(false)
      expect(zeroC.matches(1)).toBe(false)
      expect(negZeroC.matches(1)).toBe(false)
      expect(nanC.matches(NaN)).toBe(false)
      expect(nullC.matches(0)).toBe(false)
    })

    it('matches -Infinity for any qualifier except Infinity', () => {
      expect(negInfC.matches(-Infinity)).toBe(true)
      expect(infC.matches(-Infinity)).toBe(true)
      expect(nanC.matches(-Infinity)).toBe(false)
      expect(criteria.matches(-Infinity)).toBe(true)
      expect(floatC.matches(-Infinity)).toBe(true)
      expect(negFloatC.matches(-Infinity)).toBe(true)
      expect(largeC.matches(-Infinity)).toBe(true)
      expect(smallC.matches(-Infinity)).toBe(true)
      expect(negativeLargeC.matches(-Infinity)).toBe(true)
      expect(negativeSmallC.matches(-Infinity)).toBe(true)
      expect(zeroC.matches(-Infinity)).toBe(true)
      expect(negZeroC.matches(-Infinity)).toBe(true)
    })

    it('does not match Infinity for any qualifier except Infinity', () => {
      expect(infC.matches(Infinity)).toBe(true)
      expect(negInfC.matches(Infinity)).toBe(false)
      expect(nanC.matches(Infinity)).toBe(false)
      expect(criteria.matches(Infinity)).toBe(false)
      expect(floatC.matches(Infinity)).toBe(false)
      expect(negFloatC.matches(Infinity)).toBe(false)
      expect(largeC.matches(Infinity)).toBe(false)
      expect(smallC.matches(Infinity)).toBe(false)
      expect(negativeLargeC.matches(Infinity)).toBe(false)
      expect(negativeSmallC.matches(Infinity)).toBe(false)
      expect(zeroC.matches(Infinity)).toBe(false)
      expect(negZeroC.matches(Infinity)).toBe(false)
    })

    it('does not match NaN for any qualifier', () => {
      expect(nanC.matches(NaN)).toBe(false)
      expect(criteria.matches(NaN)).toBe(false)
      expect(floatC.matches(NaN)).toBe(false)
      expect(negFloatC.matches(NaN)).toBe(false)
      expect(largeC.matches(NaN)).toBe(false)
      expect(smallC.matches(NaN)).toBe(false)
      expect(negativeLargeC.matches(NaN)).toBe(false)
      expect(negativeSmallC.matches(NaN)).toBe(false)
      expect(zeroC.matches(NaN)).toBe(false)
      expect(negZeroC.matches(NaN)).toBe(false)
      expect(infC.matches(NaN)).toBe(false)
      expect(negInfC.matches(NaN)).toBe(false)
      expect(nullC.matches(NaN)).toBe(false)
    })

    it('does not match null for any qualifier', () => {
      expect(nullC.matches(null)).toBe(false)
      expect(criteria.matches(null)).toBe(false)
      expect(floatC.matches(null)).toBe(false)
      expect(negFloatC.matches(null)).toBe(false)
      expect(largeC.matches(null)).toBe(false)
      expect(smallC.matches(null)).toBe(false)
      expect(negativeLargeC.matches(null)).toBe(false)
      expect(negativeSmallC.matches(null)).toBe(false)
      expect(zeroC.matches(null)).toBe(false)
      expect(negZeroC.matches(null)).toBe(false)
      expect(infC.matches(null)).toBe(false)
      expect(negInfC.matches(null)).toBe(false)
      expect(nanC.matches(null)).toBe(false)
    })
  })
})
